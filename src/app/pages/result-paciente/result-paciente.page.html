<ion-content [fullscreen]="true">
  <app-card class="card-patient-result">

    <!-- Encabezado -->
    <div class="header-pages-patient-result">
      <div class="title-pages">
        <p>Resultados de</p>
        <p>los Pacientes</p>
      </div>
    </div>

    <!-- Estad칤sticas -->
    <div class="stats-container">
      <div class="stat-card">
        <ion-icon name="analytics-outline"></ion-icon>
        <div class="stat-info">
          <p class="stat-number">{{ totalAnalisis }}</p>
          <p class="stat-label">Total de<br>Resultados</p>
        </div>
      </div>

      <div class="stat-card">
        <ion-icon name="time-outline"></ion-icon>
        <div class="stat-info">
          <p class="stat-number">{{ lstUltimosAnalisis().length }}</p>
          <p class="stat-label">칔ltimos<br>An치lisis</p>
        </div>
      </div>
    </div>

    <!-- 칔ltimos an치lisis -->
    <div class="recent-results">
      <p class="subtitle">칔ltimos Resultados de An치lisis</p>
      <ion-list mode="md">
        @for (item of lstUltimosAnalisis(); track $index) {
        <ion-item (click)="openDeailtResult(item)">
          <ion-label>
            <strong>{{ item?.Paciente?.nombre }} {{ item?.Paciente?.apellido }}</strong><br />
            DNI: {{ item?.Paciente?.dni }}<br />
            An치lisis: {{ item?.AnalisisResultados?.[0]?.Analisis?.descripcion }}
          </ion-label>
        </ion-item>
        }
      </ion-list>
    </div>

    <!-- 游댌 Buscador (siempre visible) -->
    <div class="search-section">
      <ion-searchbar
        class="search-input"
        (ionInput)="handleInput($event)"
        placeholder="Buscar paciente por nombre, apellido o DNI">
      </ion-searchbar>
    </div>

    <!-- Lista de resultados -->
    <div class="content-result fade-in-list">
      @for (item of lstResultadoAnalisisFilter(); track $index) {
        <app-items-result [pacienteAnalisis]="item" (click)="openDeailtResult(item)" />
      }
    </div>

  </app-card>
</ion-content>
